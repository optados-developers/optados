# one of gfortran, g95, ifort, pfg90
SYSTEM := gfortran

# fast / debug
BUILD := debug

# serial / mpi
COMMS_ARCH :=  serial

# Where would you like the executables?
PREFIX:=../../

SYSTEM := $(strip $(SYSTEM))
BUILD  := $(strip $(BUILD))
COMMS_ARCH := $(strip $(COMMS_ARCH))
PREFIX := $(strip $(PREFIX))

EXE_SUFFIX := .x
#-------------------------------------------
# T H I N G S   Y O U   M I G H T  W A N T  
# T O   F I D D L E   W I T H
ifeq ($(SYSTEM), g95)
   F90_SERIAL= g95
   F90_PARALLEL= mpif90
   FFLAGS= -fendian=big
   FFLAGS_PARALLEL= -DMPI
   FFLAGS_FAST= -O3
   FFLAGS_DEBUG= 
   EXTENSION=.g95
endif

ifeq ($(SYSTEM), gfortran)
   F90_SERIAL= gfortran
   F90_PARALLEL= mpif90 
   FFLAGS= -fconvert=big-endian -fPIC
   FFLAGS_PARALLEL=  -DMPI
   FFLAGS_FAST= -O3
   FFLAGS_DEBUG= -fprofile-arcs -ftest-coverage  -fstrict-aliasing  -fno-omit-frame-pointer -fno-realloc-lhs -fcheck=bounds,do,recursion,pointer -ffree-form -Wall -Waliasing -Wsurprising -Wline-truncation -Wno-tabs -Wno-uninitialized -Wno-unused-dummy-argument -Wno-unused -Wno-character-truncation -O1 -g -fbacktrace 
   EXTENSION=
endif

ifeq ($(SYSTEM), nag)
   F90_SERIAL= nagfor
   F90_PARALLEL= mpif90
   FFLAGS= -DNAG 
   FFLAGS_PARALLEL=
   FFLAGS_FAST= -O3 -Oassumed -w=all
   FFLAGS_DEBUG= -Ddebug -g -O0 -C=all -gline -w=all 
   EXTENSION=.nag
endif

ifeq ($(SYSTEM), ifort)
   F90_SERIAL= ifort
   F90_PARALLEL= mpif90 
   FFLAGS= -convert big_endian
   FFLAGS_PARALLEL= -DMPI
   FFLAGS_FAST= -O3
   FFLAGS_DEBUG= -O0 -C -pg -g -debug extended -traceback
   EXTENSION=.ifort
endif

ifeq ($(SYSTEM), pathscale)
   F90_SERIAL= pathf95
   F90_PARALLEL= mpif90 
   FFLAGS= -byteswapio
   FFLAGS_PARALLEL=  -DMPI
   FFLAGS_FAST= -O3 -OPT:Ofast -ffast-math -OPT:recip=ON -OPT:malloc_algorithm=1
   FFLAGS_DEBUG=  -Ddebug -O0 -g -ffortran-bounds-check
   EXTENSION=.path
endif

ifeq ($(SYSTEM), pgf90)
   F90_SERIAL= pgf90
   F90_PARALLEL= mpif90
   FFLAGS= -Mbyteswapio
   FFLAGS_PARALLEL= -DMPI 
   FFLAGS_FAST= -O3
   FFLAGS_DEBUG= -O0 -C -pg -g -Mbounds 
   EXTENSION=.pgf90
endif

ifeq ($(SYSTEM), sun)
   F90_SERIAL= sunf95
   F90_PARALLEL= mpif90
   FFLAGS= 
   FFLAGS_PARALLEL= -DMPI
   FFLAGS_FAST= 
   FFLAGS_DEBUG= -O0 -C -pg -g
   EXTENSION=.sunf95
endif

export OMPI_FC   := $(F90_SERIAL)
export MPICH_F90 := $(F90_SERIAL)
export I_MPI_F90 := $(F90_SERIAL)
export MPI_F90   := $(F90_SERIAL)
